<div id="comment-container" class="row">

    {% if comments %}
    <h4 class="card-title mt-4 ml-2">Комментарии</h4>
    {% endif %}
    {% for comment in comments %}
        <div name="comment" class="row container-md ml-3 mr-3 mt-2 p-0 card">
            <div class="d-flex flex-row comment-row m-t-0">
                <div class="p-2"><img src="../static/no-avatar.png" alt="user" width="50" class="rounded-circle"></div>
                <div class="comment-text w-100">
                    <h6 style="font-size: 1.2em">{{ comment.author }}</h6> <span class="m-b-15 d-block">{{ comment.text }}</span>
                    <div class="comment-footer">
                        <span class="text-muted float-right">April 14, 2019</span>
                </div>
                <button name="close-btn" class="btn-danger btn-sm">Удалить</button>
                </div>
            </div>

        </div>
    {% endfor %}
</div>

<script>
    let comments = document.getElementsByName('comment');
    let commentContainer = document.getElementById('comment-container');

    let deleteButtons = []

    for(let i = 0; i < comments.length; i++) {
        let comment = comments[i];
        // crappy way to do it, but it works
        let deleteButton = comment.childNodes[1].childNodes[3].childNodes[7];
        deleteButton.onclick = function() {
            commentContainer.removeChild(comment);
            console.log(comments)
        }
        deleteButtons.push(deleteButton);
    }

    function showDeleteButtons() {
        for(let i = 0; i < deleteButtons.length; i++) {
            show(deleteButtons[i]);
        }
    }

    function hideDeleteButtons() {
        for(let i = 0; i < deleteButtons.length; i++) {
            hide(deleteButtons[i]);
        }
    }

</script>